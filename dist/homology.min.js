/*! Homology.js, version 0.3.0.  Developed by Eric Weitz.  https://github.com/eweitz/homology.  Public domain (CC0 1.0). */
!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r=t();for(var o in r)("object"==typeof exports?exports:e)[o]=r[o]}}(window,function(){return function(e){var t={};function r(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(o,n,function(t){return e[t]}.bind(null,n));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/dist",r(r.s=1)}([function(e,t,r){"use strict";function o(e){var t;return(t=e.split(" "))[0][0].toUpperCase()+t[0].slice(1)+" "+t.slice(1).join(" ")}Object.defineProperty(t,"__esModule",{value:!0}),t.reportError=function(e,t=null,r=null,n=null,a=null){var i,u;throw null!==n&&(n=o(n)),null!==a&&(a=o(a[0])),i={geneNotFound:`Gene "${r}" not found in "${n}"`,orthologsNotFound:`Orthologs not found for gene "${r}"`,orthologsNotFoundInTarget:`Orthologs not found for gene "${r}" in target organism "${a}"`},u=t?`<br/><small>${t.message}</small>`:"",new Error(i[e]+u)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,n=r(2),a=(o=n)&&o.__esModule?o:{default:o};window.fetchOrthologs=a.default,t.default=a.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a(r(3)),n=a(r(4));function a(e){return e&&e.__esModule?e:{default:e}}t.default=async function(e,t,r,a="oma"){return"oma"===a?await(0,o.default)(e,t,r):"orthodb"===a?await(0,n.default)(e,t,r):void 0}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),n="https://omabrowser.org/api";async function a(e,t){var r,o,n,a,i,u,s,l;for(r="https://www.uniprot.org/uniprot/?format=tab&"+(i="columns=id,entry name,genes")+"&sort=score",o="&query=gene:"+e+"+AND+organism:"+t,n=await fetch(r+o),a=(await n.text()).split("\n").slice(1,-1),u=0;u<a.length;u++)if(s=(i=a[u].split("\t"))[2].split(" ").map(e=>e.toLowerCase()),l=i[0],s.includes(e.toLowerCase()))return l;throw Error('No Uniprot entry found for gene name "'+e+'" in organism "'+t+'"')}async function i(e){var t,r,o;if(t=n+"/protein/"+e+"/orthologs/",r=await fetch(t),o=await r.json(),404===r.status)throw Error('OMA orthologs not found for Uniprot protein "'+e+'".');return o}async function u(e){var t,r,o;if(t=n+"/protein/"+e+"/",r=await fetch(t),o=await r.json(),404===r.status)throw Error('OMA protein not found for Uniprot protein "'+e+'".');return o}function s(e){var t,r;return"homo sapiens"===e?"HUMAN":"mus musculus"===e?"MOUSE":([t,r]=e.split(" "),(t.slice(0,3)+r.slice(0,2)).toUpperCase())}t.default=async function(e,t,r){var n,l,c,f,d,p,g,h,w,m,v=[];for(w=0;w<e.length;w++){m=e[w];try{n=await a(m,t),l=await u(n)}catch(g){(0,o.reportError)("geneNotFound",g,m,t,r)}try{c=await i(n)}catch(g){(0,o.reportError)("orthologsNotFound",g,m,t,r)}h=r.map(e=>s(e)),0===(p=c.filter(e=>(f=e.omaid,d=f.slice(0,5),h.includes(d)))).length&&(0,o.reportError)("orthologsNotFoundInTarget",void 0,m,t,r),p.unshift(l),p=p.map(e=>e.chromosome+":"+e.locus.start+"-"+e.locus.end),v.push(p)}return v}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),n="https://homology-api.firebaseapp.com/orthodb",a="https://eutils.ncbi.nlm.nih.gov/entrez/eutils/esummary.fcgi?db=gene&retmode=json&api_key=e7ce8adecd69d0457df7ec2ccbb704c4e709";async function i(e){var t=await fetch(n+e);return(await t.json()).data}async function u(e){var t,r,o=e.gene_id.param;return"entrez"in(r=await i("/ogdetails?id="+o))?t=r.entrez[0].id:r.xrefs.forEach(e=>{"NCBIgene"===e.type&&(t=e.name)}),await async function(e){var t,r,o;return t=await fetch(a+"&id="+e),(o=(r=(await t.json()).result)[r.uids[0]].genomicinfo[0]).chrloc+":"+o.chrstart+"-"+o.chrstop}(t)}async function s(e,t,r,o){var n,a=[],u=!1;return(await i(`/orthologs?id=${e}&species=all`)).forEach(e=>{var i=e.organism.name.toLowerCase();r===i&&(n=e,e.genes.forEach(e=>{var r=e.gene_id.id.toLowerCase();t.toLowerCase()===r&&(u=!0)})),o.includes(i)&&a.push(e)}),[n,a,u]}t.default=async function(e,t,r){var n,a,l,c,f,d,p=!1,g=[],h=[];for(a=0;a<e.length;a++){for(d=e[a],n=await i("/search?query="+d+"&&level=2759&species=9606"),l=0;l<n.length&&(c=n[l],[f,g,p]=await s(c,d,t,r),!p);l++);void 0===f&&(0,o.reportError)("orthologsNotFound",null,d,t,r);var w=f.genes.filter(e=>{var t=e.gene_id.id.toLowerCase();return d.toLowerCase()===t})[0],m=await u(w);0===g.length&&(0,o.reportError)("orthologsNotFoundInTarget",null,d,t,r);var v=await u(g[0].genes[0]);h.push([m,v])}return h}}])});
//# sourceMappingURL=homology.min.js.map